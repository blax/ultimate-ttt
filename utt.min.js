function FieldModel(o,e,r,t){var a=this;a.x=o,a.y=e,a.parent=r,a.state=ko.observable(t||" "),a.isLastMove=ko.computed(function(){return a.parent.parent.isLastMove(a)})}function BigBoardModel(){var o=this;o.nextSmallBoard=ko.observable(null),o.lastMove=ko.observable(null),o.nextMove=ko.observable("O"),o.switchMove=function(){o.nextMove(o.nextMove()=="O"?"X":"O")},o.isLastMove=function(e){return e===o.lastMove()},o.makeMove=function(e){var r=!o.nextSmallBoard()||o.nextSmallBoard()==e.parent;if(r&&e.state()==" "){e.state(o.nextMove()),o.switchMove(),o.lastMove(e);var t=o.big_rows[e.x].big_cols[e.y];o.nextSmallBoard(t)}},o.big_rows=[];for(var e=function(){for(var e=[],r=0;3>r;r++)e.push(new SmallBoardModel(o));return e},r=0;3>r;r++)o.big_rows.push({big_cols:e()})}function SmallBoardModel(o){var e=this;e.parent=o,e.rows=[];for(var r=function(o){for(var r=[],t=0;3>t;t++)r.push(new FieldModel(o,t,e," "));return r},t=0;3>t;t++)e.rows.push({cols:r(t)});e.winner=ko.computed(function(){for(var o={O:0,X:0},r={O:0,X:0},t=0;3>t;t++){for(var a={O:0,X:0},n={O:0,X:0},s=0;3>s;s++)a[e.rows[t].cols[s].state()]++,n[e.rows[s].cols[t].state()]++;if(a.O==3||n.O==3)return"O";if(a.X==3||n.X==3)return"X";o[e.rows[t].cols[t].state()]++,r[e.rows[2-t].cols[t].state()]++}return o.O==3||r.O==3?"O":o.X==3||r.X==3?"X":!1}),e.boardState=ko.computed(function(){var r=o.nextSmallBoard(),t=e.winner();return t?(e.winner.dispose(),"won-board-"+t):r&&r!==e?"inactive-board":"active-board"})}ko.applyBindings(new BigBoardModel);